<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Javascript 기본 문법</title>
</head>
<body>
    <h1>Javascript 기본 문법</h1>
    <hr><br>

    <h3>변수(Variable)</h3>
    <div> - JS에서 데이터를 담을수 있는 공간, client 브라우저 메모리에 생성되고 활용 됨</div>
    <div> - 변수의 Type은 처음에는 정해져 있지 않고, 값이 실제 asign(=) 될때 변수의 Type이 결정됨(동적바인딩)</div>
    <div> - 전역변수 사용시 특정한 키워드 없이 선언하면 된다. ex) value = 10;</div>
    <div> - var : 변수선언 키워드로 프로퍼티가 변경되지 않는 특성을 가짐, 사실상 전역 ex) var value = 10;</div>
    <div> - let(ES6) : 블록 스코프를 가지는 변수로 완벽한 지역변수 ex) let value = 10;</div>
    <div> - const(ES6) : 상수로 선언시 활용, 값이 한번 정해지면 변경 불가! (에러 발생!)</div>
    <hr><br>
    <script>
        // num0; // Uncaught ReferenceError: num0 is not define, 전역변수가 변수가 초기화 되지 않은 경우 프로그램이 죽는다!
        // document.write('num0 : ' + num0 + '<br>');
        num1 = 10; // 전역사용
        var num2 = 20; // var 변수 선언, 고전에서는 이 방법을 권장했다. 사실상 전역
        var num3 = num1 + num2;
        var num4; // null이 아닌 undefined 상태, null 체크시 undefined도 같이 체킹됨으로 null로 필터링

        document.write('num1 : ' + num1 + '<br>'); // js에서는 문자열의 '+'을 하면 합쳐진다.
        document.write('num2 : ' + num2 + '<br>');
        document.write('num3 : ' + num3 + '<br>');
        document.write('num4 : ' + num4 + '<br><br>'); // undefined 출력, null과 같은 취급

        // 문자열 선언법
        str1 = 'Hello '; // 싱글 쿼테이션을 추천! 이유 : html에서 ""을 사용하기 때문
        var str2 = "javascript "; 
        var str3 = str1 + str2 + "world!";
        document.write('str1 : ' + str1 + '<br>');
        document.write('str2 : ' + str2 + '<br>');
        document.write('str3 : ' + str3 + '<br><br>');

        // 문자열 + 숫자 = 문자, 문자/숫자 혼합되는 경우 우선순위 이슈가 발생함! -> 괄호 사용!
        document.write(str1 + num1 + 1000 + '<br>'); // Hello 101000
        document.write(str1 + (num1 + 1000) + '<br><br>'); // Hello 1010 

        let val1 = 10; // let, ES6에서 추가된 문법, 익스플로러에서는 호환되지 않은 문법(11버전 미만)
        val2 = 20;
        const con1 = 30; // const, ES6문법, 상수 사용 방법
        document.write('val1 : ' + val1 + '<br>');
        document.write('val2 : ' + val2 + '<br>');
        document.write('con1 : ' + con1 + '<br>');

        // 변수는 type 정해져도 바뀔수 있다. 
        val1 = '안녕하세요?'; // number -> string
        val2 = '하이'; // number -> string
        // con1 = '안녕하세요?'; // 상수라 변경되지 않음! TypeError: Assignment to constant variable.

        document.write('val1 : ' + val1 + '<br>');
        document.write('val2 : ' + val2 + '<br>');
        document.write('con1 : ' + con1 + '<br><br>');

        // let 범위 테스트, 
        let letValue = 10;
        var varValue = 20;
        document.write('letValue : ' + letValue + '<br>'); // 10 
        document.write('varValue : ' + varValue + '<br>'); // 20

        // 현재 이 영역은 전역영역이다.

        {   // 블록 영역 생성
            let letValue; // undefined
            var varValue; // undefined? -> 20, 전역처럼 동작
            document.write('letValue : ' + letValue + '<br>'); // undefined 
            document.write('varValue : ' + varValue + '<br>'); // 20

            letValue = 30;
            varValue = 40; 
        }
        document.write('letValue : ' + letValue + '<br>'); // 10 -> 초기 블록값으로 출력 
        document.write('varValue : ' + varValue + '<br>'); // 40 -> 블록 내에서 변경된 값으로 출력
    </script>
    <h3>script 태그가 끊어진 영역, 다시 script를 여는 경우 위에서 생성했던 변수를 재사용 할수 있다.</h3>
    <script>
         // script 시작 블록은 global 영역으로 활용됨
        document.write('val1 : ' + val1 + '<br>');
        document.write('val2 : ' + val2 + '<br>');
        document.write('con1 : ' + con1 + '<br>');
        document.write('letValue : ' + letValue + '<br>'); 
        document.write('varValue : ' + varValue + '<br>'); 
    </script>
    <hr><br>

    
    <h3>JS의 Type 종류</h3>
    <div> - JS에서는 Type의 선언은 없지만 내부적으로 type이 존재 </div>
    <div> - 기본적인 Type은 string, number, boolean을 제공함 </div>
    <div> - number의 경우 64bit 부동소수점(double)으로 동작함 </div>
    <div> - 객체 관련 Type은 기본형인 object가 있으며 null이 존재 </div>
    <div> - 변수를 선언하고 아무 값도 없는 경우 undefined type이 존재함 -> null과 다름 </div>
    <div> - type을 확인하기 위해서는 typeof()를 통해 확인 가능  </div>

    
    <script>
        // string type
        str1 = '문자열';
        document.write('문자열1 : ' + typeof('Hello') + '<br>'); // string
        document.write('문자열2 : ' + typeof(str1) + '<br><br>');
        
        // number type
        num1 = 10;
        document.write('숫자1 : ' + typeof(123) + '<br>'); // number
        document.write('숫자2 : ' + typeof(num1) + '<br>');
        document.write('숫자3 : ' + typeof(10.12345) + '<br>');
        document.write('숫자4 : ' + typeof(-100) + '<br><br>');

        // 문자인지 확인하는 if문 작성
        val = 'test';
        if(typeof(val) == 'string'){
            document.write('문자열입니다. <br>');
        } else{
            document.write('문자열 아닙니다. <br>');
        }

        // boolean type
        var isValue = true; // boolean true, false;
        document.write('논리값1 : ' + typeof(true) + '<br>'); // boolean
        document.write('논리값2 : ' + typeof(false) + '<br>');
        document.write('논리값3 : ' + typeof(isValue) + '<br><br>');
 
        // undefined, null 체크 연습
        // 결론 : undefined는 null로 체크할 수 있다.
        var undefinedValue; // undefined
        var nullValue = null; // null
        document.write('undefinedValue : ' + undefinedValue + '<br>'); // 출력시 undefined
        document.write('nullValue : ' + nullValue + '<br>'); // 출력시 null
        document.write('undefinedValue typeof : ' + typeof(undefinedValue) + '<br>'); // undefined
        document.write('nullValue typeof : ' + typeof(nullValue) + '<br>'); // object
        document.write('undefinedValue null check : ' + (undefinedValue == null) + '<br>'); // true
        document.write('nullValue null check : ' + (nullValue == null) + '<br><br>'); // true

        // 숫자 판단이 필요할때는 Number.isNaN = Not a number
        document.write('undefinedValue isNaN : ' + Number.isNaN(undefinedValue) + '<br>'); // false
        document.write('nullValue isNaN : ' + isNaN(nullValue) + '<br>'); // false
        document.write('<br>');

        // function type
        var func1 = function(test){
            return test + 5;
        }
        document.write('func1 : ' + func1 + '<br>');
        document.write('func1 typeof : ' + typeof(func1) + '<br>'); // function
    </script>
    <hr><br>

    
    <h3>JS 주요 연산자</h3>
    <div> - c, Java 계열과 거의 일치하여 c,Java 사용자에게 유리 </div>
    <div> - https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/Expressions_and_operators</div>
    <div> - c와 Java와 다르게 ===삼중등호, typeof, ??=(Nullish 병합 연산자) 등이 있다.  </div>
    <div> - ES6이전에는 삼항연산자가 존재하지 않았으나 ES6 이후 삼항 연산자가 추가되었다.  </div>
    <br>
    <table border="1">
        <thead>
          <tr>
            <th>연산자 유형</th>
            <th>개별 연산자</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>맴버 접근</td>
            <td><code>.</code> <code>[]</code></td>
          </tr>
          <tr>
            <td>인스턴스 호출/생성</td>
            <td><code>()</code> <code>new</code></td>
          </tr>
          <tr>
            <td>증감</td>
            <td><code>!</code> <code>~</code> <code>-</code> <code>+</code> <code>++</code> <code>--</code> <code>typeof</code> <code>void</code> <code>delete</code></td>
          </tr>
          <tr>
            <td>거듭제곱</td>
            <td><code>**</code></td>
          </tr>
          <tr>
            <td>곱하기/나누기</td>
            <td><code>*</code> <code>/</code> <code>%</code></td>
          </tr>
          <tr>
            <td>더하기/빼기</td>
            <td><code>+</code> <code>-</code></td>
          </tr>
          <tr>
            <td>비트 시프트</td>
            <td><code>&lt;&lt;</code> <code>&gt;&gt;</code> <code>&gt;&gt;&gt;</code></td>
          </tr>
          <tr>
            <td>관계</td>
            <td><code>&lt;</code> <code>&lt;=</code> <code>&gt;</code> <code>&gt;=</code> <code>in</code> <code>instanceof</code></td>
          </tr>
          <tr>
            <td>동등/일치</td>
            <td><code>==</code> <code>!=</code> <code>===</code> <code>!==</code></td>
          </tr>
          <tr>
            <td>비트 AND</td>
            <td><code>&amp;</code></td>
          </tr>
          <tr>
            <td>비트 XOR</td>
            <td><code>^</code></td>
          </tr>
          <tr>
            <td>비트 OR</td>
            <td><code>|</code></td>
          </tr>
          <tr>
            <td>논리 AND</td>
            <td><code>&amp;&amp;</code></td>
          </tr>
          <tr>
            <td>논리 OR</td>
            <td><code>||</code></td>
          </tr>
          <tr>
            <td>조건</td>
            <td><code>?:</code></td>
          </tr>
          <tr>
            <td>할당</td>
            <td><code>=</code> <code>+=</code> <code>-=</code> <code>**=</code> <code>*=</code> <code>/=</code> <code>%=</code> <code>&lt;&lt;=</code> <code>&gt;&gt;=</code> <code>&gt;&gt;&gt;=</code> <code>&amp;=</code> <code>^=</code> <code>|=</code> <code>&amp;&amp;=</code> <code>||=</code> <code>??=</code></td>
          </tr>
          <tr>
            <td>쉼표</td>
            <td><code>,</code></td>
          </tr>
        </tbody>
      </table>
    <hr><br>

    
    <h3>String 관련 메소드</h3>
    <div> - java에서 String과 같이 Type에서 다양한 메소드를 지원함</div>
    <script>
        var str = 'Hello Javascript World!';
        var str2 = 'test';
        var str3 = '    \t\nHello Javascript World!';

        document.write('str : ' + str + '<br>');
        document.write('length : ' + str.length + '<br>'); // 문자열 길이 확인
        document.write('toUpperCase : ' + str.toUpperCase() + '<br>'); // 대문자
        document.write('toLowerCase : ' + str.toLowerCase() + '<br>'); // 소문자
        document.write('indexOf1 : ' + str.indexOf('Hello') + '<br>');  // 위치 찾기, 0
        document.write('indexOf2 : ' + str.indexOf('Python') + '<br>');  // 위치 찾기, -1
        document.write('indexOf3 : ' + str.indexOf('Java') + '<br>');  // 위치 찾기, 6
        document.write('indexOf4 : ' + str.indexOf('l', 5) + '<br>');  // 두번째 인자 이후 값부터 찾는, World에 있는 l 위치 = 20
        document.write('lastIndexOf : ' + str.lastIndexOf('l') + '<br>'); // 뒤로부터 찾는다. 20
        document.write('charAt : ' + str.charAt(0) + '<br>');  // index에 해당되는 문자열 가져오기
        document.write('charAt : ' + str.charAt(1) + '<br>');  // index에 해당되는 문자열 가져오기
        document.write('charAt : ' + str.charAt(2) + '<br>');  // index에 해당되는 문자열 가져오기
        document.write('substr : ' + str.substr(2) + '<br>');   // 문자열 자르기, 2부터 자르는 방법
        document.write('substr : ' + str.substr(0, 5) + '<br>');   // 문자열 자르기, 0~5까지 자르기
        document.write('slice : ' + str.slice(2) + '<br>');   // 문자열 자르기2, 2부터 자르는 방법
        document.write('slice : ' + str.slice(0, 5) + '<br>');   // 문자열 자르기2, 0~5까지 자르기
        document.write('padStart : ' + str2.padStart(str2.length + 5, '*') + '<br>');  // 문자열 채우는 방법, 첫번째인자=길이, 두번째는 채울 문자열 
        document.write('padEnd : ' + str2.padEnd(str2.length + 5, '*') + '<br>');  // 문자열 채우는 방법, 첫번째인자=길이, 두번째는 채울 문자열 
        document.write('replace : ' + str.replace('Javascript', 'Java') + '<br>'); // 문자열 바꾸기 
        document.write('replace2 : ' + str.replace('l', 'o') + '<br>'); // 가장 처음만 바뀐다.
        document.write('replaceAll : ' + str.replaceAll('l', 'o') + '<br>'); // 문자열 바꾸기 전체
        document.write('split1 : ' + str.split('') + '<br>'); // 문자열 전체를 array로 변경
        document.write('split2 : ' + str.split(' ') + '<br>'); // 공백으로 분리하는 방법
        document.write('concat : ' + str.concat(' Hello JS World!').concat('<br>')); // 문자열 합치기
        document.write('문자열 합치기 : ' + str + ' Hello JS World!' + '<br>'); // 문자열 합치기2
        document.write('startsWith : ' + str.startsWith('Hello') + '<br>'); // 시작 문자열 확인, Hello=true
        document.write('startsWith : ' + str.startsWith('Hi') + '<br>'); // 시작 문자열 확인, Hello=false
        document.write('endsWith : ' + str.endsWith('World!') + '<br>'); // 시작 문자열 확인, Wrold!=true
        document.write('endsWith : ' + str.endsWith('world') + '<br>'); // 시작 문자열 확인, world=false
        document.write('trim : ' + str3.trim() + '<br>'); // 공백 제거하는 방법, 사용자 입력값 체크 필수!
        document.write('matchAll : ' + str3.matchAll(/[^0-9]/g).next() + '<br>'); // 숫자인지 판별하는 정규식 예시
        document.write('repeat : ' + str2.repeat(3) + '<br>'); // 문자열 반복
    </script>
    <hr><br>

    <h3>Number 관련 메소드</h3>
    <div> - Number에서 다양한 메소드를 지원</div>
    <div> - JavaScript에서 Number는 Java-double과 같은 64bit 부동소수점을 가짐</div>
    <br>
    <script>
        var value = 123;
        document.write('toString : '+ value.toString() + '<br>'); // 문자열 변환법
        document.write('' + value + '<br>'); // 이것도 된다.

        value = 3.141592;
        document.write('value : ' + value +'<br>');
        document.write('toExponential : ' + value.toExponential(2) +'<br>'); // 지수형태 바꾸기
        document.write('toExponential : ' + value.toExponential(3) +'<br>'); // 지수형태 바꾸기
        document.write('toFixed : ' + value.toFixed(2) +'<br>'); // 소수점 자르기, 2번째까지
        document.write('toFixed : ' + value.toFixed(3) +'<br>'); 
        document.write('toPrecision : ' + value.toPrecision(3) +'<br>'); // 지수형태든 소수점이든 소수점 잘 잘라주는 방법
        document.write('toPrecision : ' + value.toPrecision(5) +'<br>'); // 반올림이 가능하다.
    </script>
    <hr><br>

    <h3>숫자 - 문자열 변환 방법</h3>
    <script>
        var num1 = 10;
        var numStr1 = '' + num1; // 문자열 전환방법 추천
        var numStr2 = String(num1);
        var numStr3 = num1.toString();
        document.write(typeof(numStr1) + '<br>');
        document.write(typeof(numStr2) + '<br>');
        document.write(typeof(numStr3) + '<br>');
    </script>
    <hr><br>

    <h3> 문자 - 숫자 변환 방법</h3>
    <script>
        var str1 = '10';
        document.write(Number(str1) + ' ' + typeof (Number(str1)) + '<br>');
        document.write(parseInt(str1) + ' ' + typeof (parseInt(str1)) + '<br>');  // 정수변환
        document.write(parseFloat(str1) + ' ' + typeof (parseFloat(str1)) + '<br>'); // 실수변환

        // 실수문자열을 숫자로
        var str1 = '3.1491592';
        document.write(Number(str1) + ' ' + typeof (Number(str1)) + '<br>');
        document.write(parseInt(str1) + ' ' + typeof (parseInt(str1)) + '<br>');  // 정수변환-> 소수점 짤림!
        document.write(parseFloat(str1) + ' ' + typeof (parseFloat(str1)) + '<br>'); // 실수변환
    </script>
    <hr><br>

    <h3>삼중등호(===) 연산자</h3>
    <div> - 데이터의 실제 type까지 비교하는 연산자</div>
    <div> - Javascript의 모든 변수는 실제 메모리에서 문자열 저장된다. type과 상관없이 비교가 가능하다.</div>
    <div> - '10' == 10 일 경우 실제 저장값이 '10'임으로 true가 나옴</div>
    <br>
    <script>
        document.write(10 == '10'); // true, type일치하지 않아도 문자열만 같으면 비교 가능!
        document.write('<br>'); 
        document.write(10 != '10'); // false
        document.write('<br>'); 

        document.write(10 === '10'); // 상중등호 사용시 false, type 달라서 false
        document.write('<br>'); 
        document.write(10 !== '10'); // 상중등호 사용시 true, type 달라서 true
        document.write('<br>'); 
        document.write(10 === 10); // 상중등호 사용시 true
        document.write('<br>'); 
        document.write(10 !== 10); // 상중등호 사용시 flase
        document.write('<br>'); 
    </script>
    <hr><br>
    
    <h3>문자열 연결 연산자</h3>
    <script>
        var str = '문자열' + ' 연결' + '연산자 ' + '입니다.';
        document.write(str);
    </script>
    <hr><br>

    
    <h3>??(Nullish coalescing operator, nullish 병합 연산자)</h3>
    <h3>??=(Nullish coalescing assignment, nullish 병합 할당 )</h3>
    <div> - 특정값이 null 일 경우 이를 대체하는 값을 할당할수 있는 연산자 또는 할당 값 </div>
    <div> - front 표현식에서 삼항연산자를 더 짧게 사용할수 있는 문법으로 최근 자주 사용 ★★★  </div>
    <br>
    <script>
        var str = null ?? 'default string';
        document.write('str : ' + str + '<br>');
        var nullValue = null;
        var str = nullValue ?? 'default string';
        document.write('str : ' + str + '<br>');
        
        str = null;
        str ??= 'default string'  // null이면 할당이 된다.
        document.write(str);
        document.write('<br>');
        
        str = 'not null'; 
        str ??= 'default string'  // null이 아님으로 할당되지 않는다.
        document.write(str);
        document.write('<br>');
    </script>
    <br><br><br><br><br>
    <br><br><br><br><br>
    <br><br><br><br><br>
    <br><br><br><br><br>
</body>
</html>